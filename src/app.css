@import 'tailwindcss';
@plugin '@tailwindcss/forms';
@plugin '@tailwindcss/typography';
@plugin 'flowbite/plugin';

@custom-variant dark (&:where(.dark, .dark *));

@theme {
    --color-primary-50: #fff5f2;
    --color-primary-100: #fff1ee;
    --color-primary-200: #ffe4de;
    --color-primary-300: #ffd5cc;
    --color-primary-400: #ffbcad;
    --color-primary-500: #fe795d;
    --color-primary-600: #ef562f;
    --color-primary-700: #eb4f27;
    --color-primary-800: #cc4522;
    --color-primary-900: #a5371b;

    --color-secondary-50: #f0f9ff;
    --color-secondary-100: #e0f2fe;
    --color-secondary-200: #bae6fd;
    --color-secondary-300: #7dd3fc;
    --color-secondary-400: #38bdf8;
    --color-secondary-500: #0ea5e9;
    --color-secondary-600: #0284c7;
    --color-secondary-700: #0369a1;
    --color-secondary-800: #075985;
    --color-secondary-900: #0c4a6e;
}

@source "../node_modules/flowbite-svelte/dist";
@source "../node_modules/flowbite-svelte-icons/dist";

@layer base {
    /* disable chrome cancel button */
    input[type='search']::-webkit-search-cancel-button {
        display: none;
    }
}

body {
    @apply bg-gray-50 text-gray-800;
    @apply dark:bg-gray-800 dark:text-gray-300;
}

/* === LIQUID GLASS UTILITIES (Tailwind v4) === */
@layer utilities {
    /* Soft color blobs using your secondary/primary palette */
    .bg-aurora {
        @apply absolute inset-0 -z-10 pointer-events-none;
        background-image:
                radial-gradient(60% 60% at 0% 0%,
                color-mix(in oklab, theme(colors.secondary.400) 22%, transparent) 0%,
                transparent 60%),
                radial-gradient(55% 55% at 100% 0%,
                color-mix(in oklab, theme(colors.primary.400) 18%, transparent) 0%,
                transparent 60%),
                radial-gradient(45% 45% at 50% 100%,
                color-mix(in oklab, theme(colors.secondary.300) 16%, transparent) 0%,
                transparent 60%);
        background-repeat: no-repeat;
        background-size: cover;
    }

    /* Whisper-grain for texture (very light) */
    .bg-grain {
        @apply absolute inset-0 -z-10 pointer-events-none opacity-20;
        mix-blend-mode: soft-light;
        background-image:
                radial-gradient(circle at 1px 1px, rgba(255,255,255,0.08) 1px, transparent 1.2px),
                radial-gradient(circle at 0.5px 0.5px, rgba(0,0,0,0.15) 0.8px, transparent 1px);
        background-size: 6px 6px, 10px 10px;
        background-position: 0 0, 1px 2px;
    }

    /* Reusable glass card */
    .glass {
        @apply shadow-sm dark:shadow-gray-900 backdrop-blur-lg;
        /* light/dark base translucency */
        /*@apply bg-white/4 dark:bg-gray-800/3;*/
        @apply bg-gray-50/75 dark:bg-gray-800/75;
    }

    /* Strengthen edge contrast on darker scenes */
    .glass-strong {
        border-color: rgb(255 255 255 / 0.28);
    }

    /* Internal scrim to guarantee readable text over busy zones */
    .glass-scrim {
        --scrim: color-mix(in oklab, theme(colors.gray.900) 45%, transparent);
    }
    .glass-scrim::before {
        content: "";
        @apply absolute inset-0 pointer-events-none;
        background: var(--scrim);
    }

    /* Backdrop-blur fallback */
    @supports not (backdrop-filter: blur(1rem)) {
        .glass { @apply bg-white/12 dark:bg-white/10; }
    }
}

/* Prefer stronger contrast if the user asks for it */
@media (prefers-contrast: more) {
    .glass { border-color: rgb(255 255 255 / 0.32); }
    .glass-scrim { --scrim: color-mix(in oklab, theme(colors.gray.900) 60%, transparent); }
}

/* Optional: reduce motion if you later add subtle bg shifts */
@media (prefers-reduced-motion: reduce) {
    .motion-safe\:animate-none { animation: none !important; }
}
